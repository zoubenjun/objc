#  网络

网络七层协议
应用层：
1.用户接口、应用程序；
2.Application典型设备：网关；
3.典型协议、标准和应用：TELNET、FTP、HTTP

表示层：
1.数据表示、压缩和加密presentation
2.典型设备：网关
3.典型协议、标准和应用：ASCLL、PICT、TIFF、JPEG|MPEG
4.表示层相当于一个东西的表示，表示的一些协议，比如图片、声音和视频MPEG。

会话层：
1.会话的建立和结束；
2.典型设备：网关；
3.典型协议、标准和应用：RPC、SQL、NFS、X WINDOWS、ASP

传输层：
1.主要功能：端到端控制Transport；
2.典型设备：网关；
3.典型协议、标准和应用：TCP、UDP、SPX

网络层：
1.主要功能：路由、寻址Network；
2.典型设备：路由器；
3.典型协议、标准和应用：IP、IPX、APPLETALK、ICMP；

数据链路层：
1.主要功能：保证无差错的疏忽链路的data link；
2.典型设备：交换机、网桥、网卡；
3.典型协议、标准和应用：802.- 802.3ATM、HDLC、FRAME RELAY；

物理层：
1.主要功能：传输比特流Physical；
2.典型设备：集线器、中继器
3.典型协议、标准和应用：V.3- EIA/TIA-232.

## TCP
### 三次握手
1. 客户端向服务端发起请求链接，首先发送SYN报文，SYN=1，seq=x,并且客户端进入SYN_SENT状态

2. 服务端收到请求链接，服务端向客户端进行回复，并发送响应报文，SYN=1，seq=y,ACK=1,ack=x+1,并且服务端进入到SYN_RCVD状态
3. 客户端收到确认报文后，向服务端发送确认报文，ACK=1，ack=y+1，此时客户端进入到ESTABLISHED，服务端收到用户端发送过来的确认报文后，也进入到ESTABLISHED状态，此时链接创建成功

### 四次挥手
1. 客户端向服务端发起关闭链接，并停止发送数据
2. 服务端收到关闭链接的请求时，向客户端发送回应，我知道了，然后停止接收数据
3. 当服务端发送数据结束之后，向客户端发起关闭链接，并停止发送数据
4. 客户端收到关闭链接的请求时，向服务端发送回应，我知道了，然后停止接收数据

## HTTP和HTTPS
### HTTP和HTTPS有什么区别？
HTTP协议是一种使用明文数据传输的网络协议。
HTTPS协议可以理解为HTTP协议的升级，就是在HTTP的基础上增加了数据加密。在数据进行传输之前，对数据进行加密，然后再发送到服务器。这样，就算数据被第三者所截获，但是由于数据是加密的，所以你的个人信息让然是安全的。这就是HTTP和HTTPS的最大区别。

### HTTPS的加密方式？
Https采用对称加密和非对称加密结合的方式来进行通信。
Https不是应用层的新协议，而是Http通信接口用SSL和TLS来加强加密和认证机制。

对称加密： 加密和解密都是同一个钥匙
非对称加密：密钥承兑出现，分为公钥和私钥，公钥加密需要私钥解密，私钥加密需要公钥解密

### HTTP的建立连接的过程？
* 建立链接完毕以后客户端会发送响应给服务器
* 服务端接受请求并且做出响应发送给客户端
* 客户端收到响应并且解析响应给客户

### HTTPS的建立连接的过程？

1. 客户端会把安全协议版本号、客户端支持的加密算法列表、随机数C发给服务端。
2. 服务端接收密钥算法配件后，会和自己支持的加密算法列表进行比对，如果不符合，则断开连接。否则，服务端会在该算法列表中，选择一种对称算法（如AES）、一种公钥算法（如具有特定秘钥长度的RSA）和一种MAC算法发给客户端。
服务器端有一个密钥对，即公钥和私钥，是用来进行非对称加密使用的，服务器端保存着私钥，不能将其泄露，公钥可以发送给任何人。
在发送加密算法的同时还会把数字证书和随机数S发送给客户端
3. 客户端会对server公钥进行检查，验证其合法性，如果发现发现公钥有问题，那么HTTPS传输就无法继续。
4. 如果公钥合格，那么客户端会用服务器公钥来生成一个前主秘钥(Pre-Master Secret，PMS)，并通过该前主秘钥和随机数C、S来组装成会话秘钥
5. 通过服务端的公钥来对前主秘钥进行非对称加密，发送给服务端
6. 服务端接收到加密信息后，用私钥解密得到主秘钥。
7. 服务端通过前主秘钥和随机数C、S来组装会话秘钥。
8. 客户端收到服务器发送来的密文，用客户端密钥对其进行对称解密，得到服务器发送的数据。
同理，服务端收到客户端发送来的密文，用服务端密钥对其进行对称解密，得到客户端发送的数据。

会话秘钥 = random S + random C + 前主秘钥
